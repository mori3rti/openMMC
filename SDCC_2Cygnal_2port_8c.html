<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>openMMC: /home/henrique/rep/openMMC/FreeRTOS/portable/SDCC/Cygnal/port.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">openMMC
   </div>
   <div id="projectbrief">IPMControllerforAFCBoards</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(11)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_bc5d7c579dfd902f9ba2d706f4dbfc28.html">FreeRTOS</a></li><li class="navelem"><a class="el" href="dir_2f98217f7f459c4f3381a4549e27084d.html">portable</a></li><li class="navelem"><a class="el" href="dir_9a17d59c16b4ea0b206b4e5f3e2f43f4.html">SDCC</a></li><li class="navelem"><a class="el" href="dir_5315ee11b1cdd1462b4d35e1f9ef4497.html">Cygnal</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">port.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;string.h&gt;</code><br/>
<code>#include &quot;<a class="el" href="FreeRTOS_8h_source.html">FreeRTOS.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="task_8h_source.html">task.h</a>&quot;</code><br/>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a2ded1dd76ecf66f68443e7135f8807fc"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="SDCC_2Cygnal_2port_8c.html#a2ded1dd76ecf66f68443e7135f8807fc">portCLOCK_DIVISOR</a>&#160;&#160;&#160;( ( uint32_t ) 12 )</td></tr>
<tr class="separator:a2ded1dd76ecf66f68443e7135f8807fc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a60c2a5e51d2dcbefaeb7201dc327d2c1"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="SDCC_2Cygnal_2port_8c.html#a60c2a5e51d2dcbefaeb7201dc327d2c1">portMAX_TIMER_VALUE</a>&#160;&#160;&#160;( ( uint32_t ) 0xffff )</td></tr>
<tr class="separator:a60c2a5e51d2dcbefaeb7201dc327d2c1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3b69ebb0c1475f1bb8ed771e6c589e2a"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="SDCC_2Cygnal_2port_8c.html#a3b69ebb0c1475f1bb8ed771e6c589e2a">portENABLE_TIMER</a>&#160;&#160;&#160;( ( uint8_t ) 0x04 )</td></tr>
<tr class="separator:a3b69ebb0c1475f1bb8ed771e6c589e2a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aba58c81908613d65d0215a70cc1a521d"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="SDCC_2Cygnal_2port_8c.html#aba58c81908613d65d0215a70cc1a521d">portTIMER_2_INTERRUPT_ENABLE</a>&#160;&#160;&#160;( ( uint8_t ) 0x20 )</td></tr>
<tr class="separator:aba58c81908613d65d0215a70cc1a521d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a21f6ad49a2286a8c53bd5da602351487"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="SDCC_2Cygnal_2port_8c.html#a21f6ad49a2286a8c53bd5da602351487">portGLOBAL_INTERRUPT_BIT</a>&#160;&#160;&#160;( ( <a class="el" href="Flsh186_2prtmacro_8h.html#a84e9a8ba132feed0b2401c1f4e2ac63c">StackType_t</a> ) 0x80 )</td></tr>
<tr class="separator:a21f6ad49a2286a8c53bd5da602351487"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3b89bf729488db5c18a40f8a016e3838"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="SDCC_2Cygnal_2port_8c.html#a3b89bf729488db5c18a40f8a016e3838">portINITIAL_PSW</a>&#160;&#160;&#160;( ( <a class="el" href="Flsh186_2prtmacro_8h.html#a84e9a8ba132feed0b2401c1f4e2ac63c">StackType_t</a> ) 0x00 )</td></tr>
<tr class="separator:a3b89bf729488db5c18a40f8a016e3838"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a097bd32546c0c342a43bb0c66977f600"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="SDCC_2Cygnal_2port_8c.html#a097bd32546c0c342a43bb0c66977f600">portCLEAR_INTERRUPT_FLAG</a>()&#160;&#160;&#160;TMR2CN &amp;= ~0x80;</td></tr>
<tr class="separator:a097bd32546c0c342a43bb0c66977f600"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0003aec0622b1914fead6587479431a4"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="SDCC_2Cygnal_2port_8c.html#a0003aec0622b1914fead6587479431a4">portCOPY_STACK_TO_XRAM</a>()</td></tr>
<tr class="separator:a0003aec0622b1914fead6587479431a4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac4ff2bfcb6b4f48de9c31f323b245058"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="SDCC_2Cygnal_2port_8c.html#ac4ff2bfcb6b4f48de9c31f323b245058">portCOPY_XRAM_TO_STACK</a>()</td></tr>
<tr class="separator:ac4ff2bfcb6b4f48de9c31f323b245058"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a798f37b250502b49763c54a56b3aa4b0"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="SDCC_2Cygnal_2port_8c.html#a798f37b250502b49763c54a56b3aa4b0">portSAVE_CONTEXT</a>()</td></tr>
<tr class="separator:a798f37b250502b49763c54a56b3aa4b0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8d3a167375b5b57944a57df23d45b39e"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="SDCC_2Cygnal_2port_8c.html#a8d3a167375b5b57944a57df23d45b39e">portRESTORE_CONTEXT</a>()</td></tr>
<tr class="separator:a8d3a167375b5b57944a57df23d45b39e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:af5b0f7452857787ed70ce2856ca74c4b"><td class="memItemLeft" align="right" valign="top">typedef <a class="el" href="Paradigm_2Tern__EE_2small_2portmacro_8h.html#a14d32f8130d3c0b212cfc751730b5b49">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="SDCC_2Cygnal_2port_8c.html#af5b0f7452857787ed70ce2856ca74c4b">TCB_t</a></td></tr>
<tr class="separator:af5b0f7452857787ed70ce2856ca74c4b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a474fbbb58ea661a1557f05adc41120c1"><td class="memItemLeft" align="right" valign="top"><a class="el" href="Flsh186_2prtmacro_8h.html#a84e9a8ba132feed0b2401c1f4e2ac63c">StackType_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="SDCC_2Cygnal_2port_8c.html#a474fbbb58ea661a1557f05adc41120c1">pxPortInitialiseStack</a> (<a class="el" href="Flsh186_2prtmacro_8h.html#a84e9a8ba132feed0b2401c1f4e2ac63c">StackType_t</a> *pxTopOfStack, <a class="el" href="projdefs_8h.html#a24177544ba9c507a9429d6d5761eb487">TaskFunction_t</a> pxCode, <a class="el" href="Paradigm_2Tern__EE_2small_2portmacro_8h.html#a14d32f8130d3c0b212cfc751730b5b49">void</a> *pvParameters)</td></tr>
<tr class="separator:a474fbbb58ea661a1557f05adc41120c1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ade5a8c6666e7413a0355cc252029c5c6"><td class="memItemLeft" align="right" valign="top"><a class="el" href="Flsh186_2prtmacro_8h.html#ac826f39420fcf5b32ba7123a1d243f99">BaseType_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="SDCC_2Cygnal_2port_8c.html#ade5a8c6666e7413a0355cc252029c5c6">xPortStartScheduler</a> (<a class="el" href="Paradigm_2Tern__EE_2small_2portmacro_8h.html#a14d32f8130d3c0b212cfc751730b5b49">void</a>)</td></tr>
<tr class="separator:ade5a8c6666e7413a0355cc252029c5c6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af76f3c0b44c5b5c06fc046a4ee1a6423"><td class="memItemLeft" align="right" valign="top"><a class="el" href="Paradigm_2Tern__EE_2small_2portmacro_8h.html#a14d32f8130d3c0b212cfc751730b5b49">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="SDCC_2Cygnal_2port_8c.html#af76f3c0b44c5b5c06fc046a4ee1a6423">vPortEndScheduler</a> (<a class="el" href="Paradigm_2Tern__EE_2small_2portmacro_8h.html#a14d32f8130d3c0b212cfc751730b5b49">void</a>)</td></tr>
<tr class="separator:af76f3c0b44c5b5c06fc046a4ee1a6423"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:add01c927fb689f7ec170e42d47d27927"><td class="memItemLeft" align="right" valign="top"><a class="el" href="Paradigm_2Tern__EE_2small_2portmacro_8h.html#a14d32f8130d3c0b212cfc751730b5b49">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="SDCC_2Cygnal_2port_8c.html#add01c927fb689f7ec170e42d47d27927">vPortYield</a> (<a class="el" href="Paradigm_2Tern__EE_2small_2portmacro_8h.html#a14d32f8130d3c0b212cfc751730b5b49">void</a>)</td></tr>
<tr class="separator:add01c927fb689f7ec170e42d47d27927"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae1064ff55886ef9cf64f424672819a27"><td class="memItemLeft" align="right" valign="top"><a class="el" href="Paradigm_2Tern__EE_2small_2portmacro_8h.html#a14d32f8130d3c0b212cfc751730b5b49">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="SDCC_2Cygnal_2port_8c.html#ae1064ff55886ef9cf64f424672819a27">vTimer2ISR</a> (<a class="el" href="Paradigm_2Tern__EE_2small_2portmacro_8h.html#a14d32f8130d3c0b212cfc751730b5b49">void</a>)</td></tr>
<tr class="separator:ae1064ff55886ef9cf64f424672819a27"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:af7b1fc0a36e224b885fb22b9936a03a2"><td class="memItemLeft" align="right" valign="top">volatile <a class="el" href="BCC_216BitDOS_2common_2portasm_8h.html#af5b0f7452857787ed70ce2856ca74c4b">TCB_t</a> *volatile&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="SDCC_2Cygnal_2port_8c.html#af7b1fc0a36e224b885fb22b9936a03a2">pxCurrentTCB</a></td></tr>
<tr class="separator:af7b1fc0a36e224b885fb22b9936a03a2"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="a097bd32546c0c342a43bb0c66977f600"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define portCLEAR_INTERRUPT_FLAG</td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td>&#160;&#160;&#160;TMR2CN &amp;= ~0x80;</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a2ded1dd76ecf66f68443e7135f8807fc"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define portCLOCK_DIVISOR&#160;&#160;&#160;( ( uint32_t ) 12 )</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a0003aec0622b1914fead6587479431a4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define portCOPY_STACK_TO_XRAM</td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line">{                                                                                               \</div>
<div class="line">    <span class="comment">/* pxCurrentTCB points to a TCB which itself points to the location into                    \</span></div>
<div class="line"><span class="comment">    which the first stack byte should be copied.  Set pxXRAMStack to point                      \</span></div>
<div class="line"><span class="comment">    to the location into which the first stack byte is to be copied. */</span>                         \</div>
<div class="line">    pxXRAMStack = ( xdata <a class="code" href="Flsh186_2prtmacro_8h.html#a84e9a8ba132feed0b2401c1f4e2ac63c">StackType_t</a> * ) *( ( xdata <a class="code" href="Flsh186_2prtmacro_8h.html#a84e9a8ba132feed0b2401c1f4e2ac63c">StackType_t</a> ** ) <a class="code" href="CCS_2MSP430X_2port_8c.html#af7b1fc0a36e224b885fb22b9936a03a2">pxCurrentTCB</a> );       \</div>
<div class="line">                                                                                                \</div>
<div class="line">    <span class="comment">/* Set pxRAMStack to point to the first byte to be coped from the stack. */</span>                 \</div>
<div class="line">    pxRAMStack = ( data <a class="code" href="Flsh186_2prtmacro_8h.html#a84e9a8ba132feed0b2401c1f4e2ac63c">StackType_t</a> * data ) configSTACK_START;                             \</div>
<div class="line">                                                                                                \</div>
<div class="line">    <span class="comment">/* Calculate the size of the stack we are about to copy from the current                    \</span></div>
<div class="line"><span class="comment">    stack pointer value. */</span>                                                                     \</div>
<div class="line">    ucStackBytes = <a class="code" href="isr__support_8h.html#a85224ff891d5fa22f8aa26c3eaca34f1">SP</a> - ( configSTACK_START - 1 );                                              \</div>
<div class="line">                                                                                                \</div>
<div class="line">    <span class="comment">/* Before starting to copy the stack, store the calculated stack size so                    \</span></div>
<div class="line"><span class="comment">    the stack can be restored when the task is resumed. */</span>                                      \</div>
<div class="line">    *pxXRAMStack = ucStackBytes;                                                                \</div>
<div class="line">                                                                                                \</div>
<div class="line">    <span class="comment">/* Copy each stack byte in turn.  pxXRAMStack is incremented first as we                    \</span></div>
<div class="line"><span class="comment">    have already stored the stack size into XRAM. */</span>                                            \</div>
<div class="line">    while( ucStackBytes )                                                                       \</div>
<div class="line">    {                                                                                           \</div>
<div class="line">        pxXRAMStack++;                                                                          \</div>
<div class="line">        *pxXRAMStack = *pxRAMStack;                                                             \</div>
<div class="line">        pxRAMStack++;                                                                           \</div>
<div class="line">        ucStackBytes--;                                                                         \</div>
<div class="line">    }                                                                                           \</div>
<div class="line">}</div>
<div class="ttc" id="Flsh186_2prtmacro_8h_html_a84e9a8ba132feed0b2401c1f4e2ac63c"><div class="ttname"><a href="Flsh186_2prtmacro_8h.html#a84e9a8ba132feed0b2401c1f4e2ac63c">StackType_t</a></div><div class="ttdeci">portSTACK_TYPE StackType_t</div><div class="ttdef"><b>Definition:</b> prtmacro.h:92</div></div>
<div class="ttc" id="isr__support_8h_html_a85224ff891d5fa22f8aa26c3eaca34f1"><div class="ttname"><a href="isr__support_8h.html#a85224ff891d5fa22f8aa26c3eaca34f1">SP</a></div><div class="ttdeci">_pxCurrentTCB _usCriticalNesting macro portSAVE_CONTEXT SEL RB0 PUSH AX PUSH HL MOV CS XCH X MOV ES PUSH AX PUSH DE PUSH BC SEL RB1 PUSH AX PUSH BC PUSH DE PUSH HL SEL RB2 PUSH AX PUSH BC PUSH DE PUSH HL SEL RB0 MOVW!_usCriticalNesting PUSH AX MOVW!_pxCurrentTCB MOVW AX MOVW SP AX movw endm macro portRESTORE_CONTEXT MACRO SEL RB0 MOVW!_pxCurrentTCB MOVW AX MOVW MOVW SP</div><div class="ttdef"><b>Definition:</b> portASM.h:103</div></div>
<div class="ttc" id="CCS_2MSP430X_2port_8c_html_af7b1fc0a36e224b885fb22b9936a03a2"><div class="ttname"><a href="CCS_2MSP430X_2port_8c.html#af7b1fc0a36e224b885fb22b9936a03a2">pxCurrentTCB</a></div><div class="ttdeci">volatile TCB_t *volatile pxCurrentTCB</div><div class="ttdef"><b>Definition:</b> ISR_Support.h:80</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ac4ff2bfcb6b4f48de9c31f323b245058"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define portCOPY_XRAM_TO_STACK</td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line">{                                                                                               \</div>
<div class="line">    <span class="comment">/* Setup the pointers as per portCOPY_STACK_TO_XRAM(), but this time to                     \</span></div>
<div class="line"><span class="comment">    copy the data back out of XRAM and into the stack. */</span>                                       \</div>
<div class="line">    pxXRAMStack = ( xdata <a class="code" href="Flsh186_2prtmacro_8h.html#a84e9a8ba132feed0b2401c1f4e2ac63c">StackType_t</a> * ) *( ( xdata <a class="code" href="Flsh186_2prtmacro_8h.html#a84e9a8ba132feed0b2401c1f4e2ac63c">StackType_t</a> ** ) <a class="code" href="CCS_2MSP430X_2port_8c.html#af7b1fc0a36e224b885fb22b9936a03a2">pxCurrentTCB</a> );       \</div>
<div class="line">    pxRAMStack = ( data <a class="code" href="Flsh186_2prtmacro_8h.html#a84e9a8ba132feed0b2401c1f4e2ac63c">StackType_t</a> * data ) ( configSTACK_START - 1 );                     \</div>
<div class="line">                                                                                                \</div>
<div class="line">    <span class="comment">/* The first value stored in XRAM was the size of the stack - i.e. the                      \</span></div>
<div class="line"><span class="comment">    number of bytes we need to copy back. */</span>                                                    \</div>
<div class="line">    ucStackBytes = pxXRAMStack[ 0 ];                                                            \</div>
<div class="line">                                                                                                \</div>
<div class="line">    <span class="comment">/* Copy the required number of bytes back into the stack. */</span>                                \</div>
<div class="line">    do                                                                                          \</div>
<div class="line">    {                                                                                           \</div>
<div class="line">        pxXRAMStack++;                                                                          \</div>
<div class="line">        pxRAMStack++;                                                                           \</div>
<div class="line">        *pxRAMStack = *pxXRAMStack;                                                             \</div>
<div class="line">        ucStackBytes--;                                                                         \</div>
<div class="line">    } <span class="keywordflow">while</span>( ucStackBytes );                                                                    \</div>
<div class="line">                                                                                                \</div>
<div class="line">    <span class="comment">/* Restore the stack pointer ready to use the restored stack. */</span>                            <a class="code" href="isr__support_8h.html#a85224ff891d5fa22f8aa26c3eaca34f1">\</a></div>
<div class="line"><a class="code" href="isr__support_8h.html#a85224ff891d5fa22f8aa26c3eaca34f1">	SP</a> = ( uint8_t ) pxRAMStack;                                                       \</div>
<div class="line">}</div>
<div class="ttc" id="Flsh186_2prtmacro_8h_html_a84e9a8ba132feed0b2401c1f4e2ac63c"><div class="ttname"><a href="Flsh186_2prtmacro_8h.html#a84e9a8ba132feed0b2401c1f4e2ac63c">StackType_t</a></div><div class="ttdeci">portSTACK_TYPE StackType_t</div><div class="ttdef"><b>Definition:</b> prtmacro.h:92</div></div>
<div class="ttc" id="isr__support_8h_html_a85224ff891d5fa22f8aa26c3eaca34f1"><div class="ttname"><a href="isr__support_8h.html#a85224ff891d5fa22f8aa26c3eaca34f1">SP</a></div><div class="ttdeci">_pxCurrentTCB _usCriticalNesting macro portSAVE_CONTEXT SEL RB0 PUSH AX PUSH HL MOV CS XCH X MOV ES PUSH AX PUSH DE PUSH BC SEL RB1 PUSH AX PUSH BC PUSH DE PUSH HL SEL RB2 PUSH AX PUSH BC PUSH DE PUSH HL SEL RB0 MOVW!_usCriticalNesting PUSH AX MOVW!_pxCurrentTCB MOVW AX MOVW SP AX movw endm macro portRESTORE_CONTEXT MACRO SEL RB0 MOVW!_pxCurrentTCB MOVW AX MOVW MOVW SP</div><div class="ttdef"><b>Definition:</b> portASM.h:103</div></div>
<div class="ttc" id="CCS_2MSP430X_2port_8c_html_af7b1fc0a36e224b885fb22b9936a03a2"><div class="ttname"><a href="CCS_2MSP430X_2port_8c.html#af7b1fc0a36e224b885fb22b9936a03a2">pxCurrentTCB</a></div><div class="ttdeci">volatile TCB_t *volatile pxCurrentTCB</div><div class="ttdef"><b>Definition:</b> ISR_Support.h:80</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a3b69ebb0c1475f1bb8ed771e6c589e2a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define portENABLE_TIMER&#160;&#160;&#160;( ( uint8_t ) 0x04 )</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a21f6ad49a2286a8c53bd5da602351487"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define portGLOBAL_INTERRUPT_BIT&#160;&#160;&#160;( ( <a class="el" href="Flsh186_2prtmacro_8h.html#a84e9a8ba132feed0b2401c1f4e2ac63c">StackType_t</a> ) 0x80 )</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a3b89bf729488db5c18a40f8a016e3838"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define portINITIAL_PSW&#160;&#160;&#160;( ( <a class="el" href="Flsh186_2prtmacro_8h.html#a84e9a8ba132feed0b2401c1f4e2ac63c">StackType_t</a> ) 0x00 )</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a60c2a5e51d2dcbefaeb7201dc327d2c1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define portMAX_TIMER_VALUE&#160;&#160;&#160;( ( uint32_t ) 0xffff )</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a8d3a167375b5b57944a57df23d45b39e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define portRESTORE_CONTEXT</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><a class="el" href="Paradigm_2Tern__EE_2small_2portmacro_8h.html#a14d32f8130d3c0b212cfc751730b5b49">void</a></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line">{                                                                                               \</div>
<div class="line">    _asm                                                                                        \</div>
<div class="line">        pop     _bp                                                                             \</div>
<div class="line">        pop     PSW                                                                             \</div>
<div class="line">        pop     ar1                                                                             \</div>
<div class="line">        pop     ar0                                                                             \</div>
<div class="line">        pop     ar7                                                                             \</div>
<div class="line">        pop     ar6                                                                             \</div>
<div class="line">        pop     ar5                                                                             \</div>
<div class="line">        pop     ar4                                                                             \</div>
<div class="line">        pop     ar3                                                                             \</div>
<div class="line">        pop     ar2                                                                             \</div>
<div class="line">        pop     b                                                                               \</div>
<div class="line">        pop     DPH                                                                             \</div>
<div class="line">        pop     DPL                                                                             \</div>
<div class="line">        <span class="comment">/* The next byte of the stack is the IE register.  Only the global                      \</span></div>
<div class="line"><span class="comment">        enable bit forms part of the task context.  Pop off the IE then set                     \</span></div>
<div class="line"><span class="comment">        the global enable bit to match that of the stored IE register. */</span>                       \</div>
<div class="line">        pop     ACC                                                                             \</div>
<div class="line">        JB      ACC.7,0098$                                                                     \</div>
<div class="line">        CLR     IE.7                                                                            \</div>
<div class="line">        LJMP    0099$                                                                           \</div>
<div class="line">    0098$:                                                                                      \</div>
<div class="line">        SETB    IE.7                                                                            \</div>
<div class="line">    0099$:                                                                                      \</div>
<div class="line">        <span class="comment">/* Finally pop off the ACC, which was the first register saved. */</span>                      \</div>
<div class="line">        pop     ACC                                                                             \</div>
<div class="line">        reti                                                                                    \</div>
<div class="line">    _endasm;                                                                                    \</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a798f37b250502b49763c54a56b3aa4b0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define portSAVE_CONTEXT</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><a class="el" href="Paradigm_2Tern__EE_2small_2portmacro_8h.html#a14d32f8130d3c0b212cfc751730b5b49">void</a></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line">{                                                                                               \</div>
<div class="line">    _asm                                                                                        \</div>
<div class="line">        <span class="comment">/* Push ACC first, as when restoring the context it must be restored                    \</span></div>
<div class="line"><span class="comment">        last (it is used to set the IE register). */</span>                                            \</div>
<div class="line">        push    ACC                                                                             \</div>
<div class="line">        <span class="comment">/* Store the IE register then disable interrupts. */</span>                                    \</div>
<div class="line">        push    IE                                                                              \</div>
<div class="line">        clr     _EA                                                                             \</div>
<div class="line">        push    DPL                                                                             \</div>
<div class="line">        push    DPH                                                                             \</div>
<div class="line">        push    b                                                                               \</div>
<div class="line">        push    ar2                                                                             \</div>
<div class="line">        push    ar3                                                                             \</div>
<div class="line">        push    ar4                                                                             \</div>
<div class="line">        push    ar5                                                                             \</div>
<div class="line">        push    ar6                                                                             \</div>
<div class="line">        push    ar7                                                                             \</div>
<div class="line">        push    ar0                                                                             \</div>
<div class="line">        push    ar1                                                                             \</div>
<div class="line">        push    PSW                                                                             \</div>
<div class="line">    _endasm;                                                                                    \</div>
<div class="line">        PSW = 0;                                                                                \</div>
<div class="line">    _asm                                                                                        \</div>
<div class="line">        push    _bp                                                                             \</div>
<div class="line">    _endasm;                                                                                    \</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aba58c81908613d65d0215a70cc1a521d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define portTIMER_2_INTERRUPT_ENABLE&#160;&#160;&#160;( ( uint8_t ) 0x20 )</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Typedef Documentation</h2>
<a class="anchor" id="af5b0f7452857787ed70ce2856ca74c4b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef <a class="el" href="Paradigm_2Tern__EE_2small_2portmacro_8h.html#a14d32f8130d3c0b212cfc751730b5b49">void</a> <a class="el" href="BCC_216BitDOS_2common_2portasm_8h.html#af5b0f7452857787ed70ce2856ca74c4b">TCB_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="a474fbbb58ea661a1557f05adc41120c1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="Flsh186_2prtmacro_8h.html#a84e9a8ba132feed0b2401c1f4e2ac63c">StackType_t</a>* pxPortInitialiseStack </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="Flsh186_2prtmacro_8h.html#a84e9a8ba132feed0b2401c1f4e2ac63c">StackType_t</a> *&#160;</td>
          <td class="paramname"><em>pxTopOfStack</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="projdefs_8h.html#a24177544ba9c507a9429d6d5761eb487">TaskFunction_t</a>&#160;</td>
          <td class="paramname"><em>pxCode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="Paradigm_2Tern__EE_2small_2portmacro_8h.html#a14d32f8130d3c0b212cfc751730b5b49">void</a> *&#160;</td>
          <td class="paramname"><em>pvParameters</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="af76f3c0b44c5b5c06fc046a4ee1a6423"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="Paradigm_2Tern__EE_2small_2portmacro_8h.html#a14d32f8130d3c0b212cfc751730b5b49">void</a> vPortEndScheduler </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="Paradigm_2Tern__EE_2small_2portmacro_8h.html#a14d32f8130d3c0b212cfc751730b5b49">void</a>&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="add01c927fb689f7ec170e42d47d27927"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="Paradigm_2Tern__EE_2small_2portmacro_8h.html#a14d32f8130d3c0b212cfc751730b5b49">void</a> vPortYield </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="Paradigm_2Tern__EE_2small_2portmacro_8h.html#a14d32f8130d3c0b212cfc751730b5b49">void</a>&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="ae1064ff55886ef9cf64f424672819a27"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="Paradigm_2Tern__EE_2small_2portmacro_8h.html#a14d32f8130d3c0b212cfc751730b5b49">void</a> vTimer2ISR </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="Paradigm_2Tern__EE_2small_2portmacro_8h.html#a14d32f8130d3c0b212cfc751730b5b49">void</a>&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="ade5a8c6666e7413a0355cc252029c5c6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="Flsh186_2prtmacro_8h.html#ac826f39420fcf5b32ba7123a1d243f99">BaseType_t</a> xPortStartScheduler </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="Paradigm_2Tern__EE_2small_2portmacro_8h.html#a14d32f8130d3c0b212cfc751730b5b49">void</a>&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a class="anchor" id="af7b1fc0a36e224b885fb22b9936a03a2"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">volatile <a class="el" href="BCC_216BitDOS_2common_2portasm_8h.html#af5b0f7452857787ed70ce2856ca74c4b">TCB_t</a>* volatile pxCurrentTCB</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Fri Jun 24 2016 16:31:31 for openMMC by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.6
</small></address>
</body>
</html>
