\hypertarget{ina220_8c}{\section{/home/henrique/rep/open\-M\-M\-C/modules/sensors/ina220.c File Reference}
\label{ina220_8c}\index{/home/henrique/rep/open\-M\-M\-C/modules/sensors/ina220.\-c@{/home/henrique/rep/open\-M\-M\-C/modules/sensors/ina220.\-c}}
}


D\-C\-D\-Cs Voltage reading using I\-N\-A220 sensor.  


{\ttfamily \#include \char`\"{}Free\-R\-T\-O\-S.\-h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}task.\-h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}port.\-h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}sdr.\-h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}task\-\_\-priorities.\-h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}i2c.\-h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}i2c\-\_\-mapping.\-h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}payload.\-h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}ina220.\-h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}fpga\-\_\-spi.\-h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}fru.\-h\char`\"{}}\\*
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{Paradigm_2Tern__EE_2small_2portmacro_8h_a14d32f8130d3c0b212cfc751730b5b49}{void} \hyperlink{ina220_8c_ac122e0ddd2cd3e3d2cfbd4220b2b3206}{v\-Task\-I\-N\-A220} (\hyperlink{Paradigm_2Tern__EE_2small_2portmacro_8h_a14d32f8130d3c0b212cfc751730b5b49}{void} $\ast$Parameters)
\item 
uint8\-\_\-t \hyperlink{ina220_8c_a7d74961638566f766832549584940700}{ina220\-\_\-config} (\hyperlink{structina220__data__t}{ina220\-\_\-data\-\_\-t} $\ast$data)
\item 
uint16\-\_\-t \hyperlink{ina220_8c_a5639266d10ab32984eb6178711e6b3d0}{ina220\-\_\-readvalue} (\hyperlink{structina220__data__t}{ina220\-\_\-data\-\_\-t} $\ast$data, uint8\-\_\-t reg)
\item 
\hyperlink{Paradigm_2Tern__EE_2small_2portmacro_8h_a14d32f8130d3c0b212cfc751730b5b49}{void} \hyperlink{ina220_8c_ac2c8e72f7bfb1f51939b0e1a91941568}{ina220\-\_\-readall} (\hyperlink{structina220__data__t}{ina220\-\_\-data\-\_\-t} $\ast$data)
\item 
bool \hyperlink{ina220_8c_a33fa1c068b508d0cae92208fa2788ca8}{ina220\-\_\-calibrate} (\hyperlink{structina220__data__t}{ina220\-\_\-data\-\_\-t} $\ast$data)
\item 
\hyperlink{Paradigm_2Tern__EE_2small_2portmacro_8h_a14d32f8130d3c0b212cfc751730b5b49}{void} \hyperlink{ina220_8c_aeb58563406446c1aa390a569a546600c}{ina220\-\_\-init} (\hyperlink{Paradigm_2Tern__EE_2small_2portmacro_8h_a14d32f8130d3c0b212cfc751730b5b49}{void})
\end{DoxyCompactItemize}
\subsection*{Variables}
\begin{DoxyCompactItemize}
\item 
const \hyperlink{structina220__config__t}{ina220\-\_\-config\-\_\-t} \hyperlink{ina220_8c_a2468c91aa759c6ddb6da05da2ad3a54b}{ina220\-\_\-cfg}
\end{DoxyCompactItemize}


\subsection{Detailed Description}
D\-C\-D\-Cs Voltage reading using I\-N\-A220 sensor. \begin{DoxyAuthor}{Author}
Henrique Silva \href{mailto:henrique.silva@lnls.br}{\tt henrique.\-silva@lnls.\-br}, L\-N\-L\-S 
\end{DoxyAuthor}
\begin{DoxyDate}{Date}
September 2015 
\end{DoxyDate}


\subsection{Function Documentation}
\hypertarget{ina220_8c_a33fa1c068b508d0cae92208fa2788ca8}{\index{ina220.\-c@{ina220.\-c}!ina220\-\_\-calibrate@{ina220\-\_\-calibrate}}
\index{ina220\-\_\-calibrate@{ina220\-\_\-calibrate}!ina220.c@{ina220.\-c}}
\subsubsection[{ina220\-\_\-calibrate}]{\setlength{\rightskip}{0pt plus 5cm}bool ina220\-\_\-calibrate (
\begin{DoxyParamCaption}
\item[{{\bf ina220\-\_\-data\-\_\-t} $\ast$}]{data}
\end{DoxyParamCaption}
)}}\label{ina220_8c_a33fa1c068b508d0cae92208fa2788ca8}
\hypertarget{ina220_8c_a7d74961638566f766832549584940700}{\index{ina220.\-c@{ina220.\-c}!ina220\-\_\-config@{ina220\-\_\-config}}
\index{ina220\-\_\-config@{ina220\-\_\-config}!ina220.c@{ina220.\-c}}
\subsubsection[{ina220\-\_\-config}]{\setlength{\rightskip}{0pt plus 5cm}uint8\-\_\-t ina220\-\_\-config (
\begin{DoxyParamCaption}
\item[{{\bf ina220\-\_\-data\-\_\-t} $\ast$}]{data}
\end{DoxyParamCaption}
)}}\label{ina220_8c_a7d74961638566f766832549584940700}
\hypertarget{ina220_8c_aeb58563406446c1aa390a569a546600c}{\index{ina220.\-c@{ina220.\-c}!ina220\-\_\-init@{ina220\-\_\-init}}
\index{ina220\-\_\-init@{ina220\-\_\-init}!ina220.c@{ina220.\-c}}
\subsubsection[{ina220\-\_\-init}]{\setlength{\rightskip}{0pt plus 5cm}{\bf void} ina220\-\_\-init (
\begin{DoxyParamCaption}
\item[{{\bf void}}]{}
\end{DoxyParamCaption}
)}}\label{ina220_8c_aeb58563406446c1aa390a569a546600c}
\hypertarget{ina220_8c_ac2c8e72f7bfb1f51939b0e1a91941568}{\index{ina220.\-c@{ina220.\-c}!ina220\-\_\-readall@{ina220\-\_\-readall}}
\index{ina220\-\_\-readall@{ina220\-\_\-readall}!ina220.c@{ina220.\-c}}
\subsubsection[{ina220\-\_\-readall}]{\setlength{\rightskip}{0pt plus 5cm}{\bf void} ina220\-\_\-readall (
\begin{DoxyParamCaption}
\item[{{\bf ina220\-\_\-data\-\_\-t} $\ast$}]{data}
\end{DoxyParamCaption}
)}}\label{ina220_8c_ac2c8e72f7bfb1f51939b0e1a91941568}
\hypertarget{ina220_8c_a5639266d10ab32984eb6178711e6b3d0}{\index{ina220.\-c@{ina220.\-c}!ina220\-\_\-readvalue@{ina220\-\_\-readvalue}}
\index{ina220\-\_\-readvalue@{ina220\-\_\-readvalue}!ina220.c@{ina220.\-c}}
\subsubsection[{ina220\-\_\-readvalue}]{\setlength{\rightskip}{0pt plus 5cm}uint16\-\_\-t ina220\-\_\-readvalue (
\begin{DoxyParamCaption}
\item[{{\bf ina220\-\_\-data\-\_\-t} $\ast$}]{data, }
\item[{uint8\-\_\-t}]{reg}
\end{DoxyParamCaption}
)}}\label{ina220_8c_a5639266d10ab32984eb6178711e6b3d0}
\hypertarget{ina220_8c_ac122e0ddd2cd3e3d2cfbd4220b2b3206}{\index{ina220.\-c@{ina220.\-c}!v\-Task\-I\-N\-A220@{v\-Task\-I\-N\-A220}}
\index{v\-Task\-I\-N\-A220@{v\-Task\-I\-N\-A220}!ina220.c@{ina220.\-c}}
\subsubsection[{v\-Task\-I\-N\-A220}]{\setlength{\rightskip}{0pt plus 5cm}{\bf void} v\-Task\-I\-N\-A220 (
\begin{DoxyParamCaption}
\item[{{\bf void} $\ast$}]{Parameters}
\end{DoxyParamCaption}
)}}\label{ina220_8c_ac122e0ddd2cd3e3d2cfbd4220b2b3206}


\subsection{Variable Documentation}
\hypertarget{ina220_8c_a2468c91aa759c6ddb6da05da2ad3a54b}{\index{ina220.\-c@{ina220.\-c}!ina220\-\_\-cfg@{ina220\-\_\-cfg}}
\index{ina220\-\_\-cfg@{ina220\-\_\-cfg}!ina220.c@{ina220.\-c}}
\subsubsection[{ina220\-\_\-cfg}]{\setlength{\rightskip}{0pt plus 5cm}const {\bf ina220\-\_\-config\-\_\-t} ina220\-\_\-cfg}}\label{ina220_8c_a2468c91aa759c6ddb6da05da2ad3a54b}
{\bfseries Initial value\-:}
\begin{DoxyCode}
= \{
    .config\_reg\_default.cfg\_struct = \{ .bus\_voltage\_range = 
      \hyperlink{ina220_8h_afd99a6850486aa55a2099a9109e9b0da}{INA220\_16V\_SCALE\_RANGE},
                                       .pga\_gain = \hyperlink{ina220_8h_a17d764facc4c8e715c770ecfeb3ca228}{INA220\_PGA\_GAIN\_40MV},
                                       .bus\_adc\_resolution = 
      \hyperlink{ina220_8h_aded4e82bc469efcc70383c7127e0f940}{INA220\_RES\_SAMPLES\_12BIT},
                                       .shunt\_adc\_resolution = 
      \hyperlink{ina220_8h_aded4e82bc469efcc70383c7127e0f940}{INA220\_RES\_SAMPLES\_12BIT},
                                       .mode = \hyperlink{ina220_8h_a6178061d03825ee7690592241294fa4a}{INA220\_MODE\_SHUNT\_BUS\_CONT} \},
    .calibration\_factor = 40960000,
    .calibration\_reg = 0xA000, 
    .registers = \hyperlink{ina220_8h_a277720760a0d7cacc8e79a31e17325cd}{INA220\_REGISTERS},
    .shunt\_div = 100,
    .bus\_voltage\_shift = 3,
    .bus\_voltage\_lsb = 4, 
    .power\_lsb = 20
\}
\end{DoxyCode}
